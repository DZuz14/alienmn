<!-- Generated by SpecStory -->

# Convert text to component with link (2025-07-16 21:47Z)

_**User (2025-07-16 21:22Z)**_

turn the highlighted text into a component, and add a link to it at the top Lyric function comment

---

_**Assistant**_

I'll turn the highlighted text into a component and add a link to it in the top Lyric function comment.

---

<details><summary>Edit file: src/app/lyrics/song.tsx</summary>

I'll create a new LyricsContainer component from the highlighted code and add a reference to it in the top comment.

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -9,4 +9,5 @@
   * @see LyricLine
   * @see AnnotationTooltip
+  * @see LyricsContainer
   */
  export default function Lyrics() {
```

**Chunk 2**
Lines added: 7, lines removed: 24

```diff
@@ -46,28 +47,11 @@
        <ViewModeToggle viewMode={viewMode} setViewMode={setViewMode} />
  
-       <div className="bg-gray-100 rounded-lg p-6 max-w-2xl mx-auto relative">
-         {viewMode === 'original' && (
-           <p className="text-gray-400 italic text-sm mb-4">
-             Dotted underlines indicate additional context about the lyrics
-           </p>
-         )}
-         <div className="text-gray-800 space-y-4">
-           {/* @ts-ignore */}
-           {lyrics[viewMode].map((line: Lyric, index: number) => (
-             <LyricLine
-               key={index}
-               line={line}
-               onAnnotationClick={handleLyricClick}
-             />
-           ))}
-         </div>
- 
-         {activeAnnotation && (
-           <AnnotationTooltip
-             annotation={activeAnnotation}
-             onClose={() => setActiveAnnotation(null)}
-           />
-         )}
-       </div>
+       <LyricsContainer
+         viewMode={viewMode}
+         lyrics={lyrics}
+         handleLyricClick={handleLyricClick}
+         activeAnnotation={activeAnnotation}
+         setActiveAnnotation={setActiveAnnotation}
+       />
      </div>
    );
```

**Chunk 3**
Lines added: 50, lines removed: undefined

```diff
@@ -182,3 +166,53 @@
    );
  }
+ 
+ /**
+  * Container component for displaying lyrics with annotations
+  * @param {Object} props
+  * @param {'original' | 'diy'} props.viewMode - Current view mode
+  * @param {Object} props.lyrics - The lyrics data
+  * @param {Function} props.handleLyricClick - Handler for when a lyric is clicked
+  * @param {Annotation | null} props.activeAnnotation - Currently active annotation
+  * @param {Function} props.setActiveAnnotation - Function to update the active annotation
+  */
+ function LyricsContainer({
+   viewMode,
+   lyrics,
+   handleLyricClick,
+   activeAnnotation,
+   setActiveAnnotation,
+ }: {
+   viewMode: 'original' | 'diy';
+   lyrics: any;
+   handleLyricClick: (annotation: string | undefined, event: MouseEvent<HTMLParagraphElement>) => void;
+   activeAnnotation: Annotation | null;
+   setActiveAnnotation: (annotation: Annotation | null) => void;
+ }) {
+   return (
+     <div className="bg-gray-100 rounded-lg p-6 max-w-2xl mx-auto relative">
+       {viewMode === 'original' && (
+         <p className="text-gray-400 italic text-sm mb-4">
+           Dotted underlines indicate additional context about the lyrics
+         </p>
+       )}
+       <div className="text-gray-800 space-y-4">
+         {/* @ts-ignore */}
+         {lyrics[viewMode].map((line: Lyric, index: number) => (
+           <LyricLine
+             key={index}
+             line={line}
+             onAnnotationClick={handleLyricClick}
+           />
+         ))}
+       </div>
+ 
+       {activeAnnotation && (
+         <AnnotationTooltip
+           annotation={activeAnnotation}
+           onClose={() => setActiveAnnotation(null)}
+         />
+       )}
+     </div>
+   );
+ }
  
```

</details>

---

I've created a new `LyricsContainer` component from the highlighted code and added a reference to it in the top JSDoc comment. The component now handles displaying the lyrics content, annotations, and tooltip, making the main `Lyrics` component cleaner and more focused on state management.

---

